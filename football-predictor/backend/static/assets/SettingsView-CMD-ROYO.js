import{g as k,s as C}from"./index-CALnMf0V.js";import{d as E,a as d,j as B,c as N,b as U,e as l,g as t,h as n,E as f,i as v,o as M}from"./index-DJzJWRGc.js";const $={class:"p-6 max-w-4xl mx-auto"},q=E({__name:"SettingsView",setup(j){const m=d([]);m.value=[];const u=d(!1),o=d({key:"",value:""}),i=d(!1),_=async()=>{try{m.value=await k()}catch(s){f.error("加载配置失败："+s.message)}},g=s=>{o.value={...s},u.value=!0},y=async()=>{i.value=!0;try{await C([o.value]),f.success("已保存"),u.value=!1,await _()}catch(s){f.error("保存失败："+s.message)}finally{i.value=!1}};return B(_),(s,e)=>{const r=n("el-table-column"),p=n("el-button"),V=n("el-table"),c=n("el-input"),b=n("el-form-item"),x=n("el-form"),w=n("el-dialog");return M(),N("div",$,[e[7]||(e[7]=U("h1",{class:"text-2xl font-bold mb-6"},"系统设置",-1)),l(V,{data:m.value,stripe:"",style:{width:"100%"}},{default:t(()=>[l(r,{prop:"key",label:"配置项",width:"220"}),l(r,{prop:"value",label:"值"}),l(r,{label:"操作",width:"120"},{default:t(({row:a})=>[l(p,{type:"text",onClick:F=>g(a)},{default:t(()=>[...e[4]||(e[4]=[v("编辑",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),l(w,{modelValue:u.value,"onUpdate:modelValue":e[3]||(e[3]=a=>u.value=a),title:"编辑配置",width:"400px"},{footer:t(()=>[l(p,{onClick:e[2]||(e[2]=a=>u.value=!1)},{default:t(()=>[...e[5]||(e[5]=[v("取消",-1)])]),_:1}),l(p,{type:"primary",loading:i.value,onClick:y},{default:t(()=>[...e[6]||(e[6]=[v("保存",-1)])]),_:1},8,["loading"])]),default:t(()=>[l(x,{model:o.value,"label-width":"80px"},{default:t(()=>[l(b,{label:"配置项"},{default:t(()=>[l(c,{modelValue:o.value.key,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value.key=a),disabled:""},null,8,["modelValue"])]),_:1}),l(b,{label:"值"},{default:t(()=>[l(c,{modelValue:o.value.value,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value.value=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}});export{q as default};
